function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==_typeof(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=8)}([function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.HttpService=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.get=function(){return $.ajax({url:this.url,type:"GET",dataType:"json"})},e.prototype.post=function(t){return $.ajax({url:this.url,type:"POST",cache:!1,data:t,dataType:"json"})},e}(n(4).RequestService);e.HttpService=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AppEvents=void 0;var o=function(){function t(){}return t.prototype.init=function(){this.appEvents.forEach(function(t){t.setEvent()})},t}();e.AppEvents=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventsFactory=void 0;var o=n(3),i=n(5),r=n(6),a=n(7),c=function(){function t(){}return t.build=function(t){switch(t){case"changeEntidade":return new o.ChangeEntidadeEvent;case"chooseNewEntidade":return new i.ChooseNewEntidadeEvent;case"clickPaymentMethodNames":return new r.ClickPaymentMethodNamesEvent;case"clickResendMbwayPhone":return new a.ClickResendMbwayPhoneEvent;default:return null}},t}();e.EventsFactory=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChangeEntidadeEvent=void 0;var o=n(0),i=function(){function t(){this.containerEntidade=$("#ifthenpayMultibancoEntidade"),this.containerSubEntidade=$("#ifthenpayMultibancoSubentidade"),this.httpService=new o.HttpService("AdminIfthenpayPaymentMethodSetup.php"),this.spinner=$("#appSpinner")}return t.prototype.setEvent=function(){var t=this;this.spinner.parent().insertAfter(this.containerSubEntidade),this.containerEntidade.change(function(e){t.dispatch(e)})},t.prototype.dispatch=function(t){var e=this;this.spinner.show();var n=$(new DocumentFragment);this.httpService.post({ajax:1,controller:"AdminIfthenpayPaymentMethodSetup",action:"GetSubEntidade",entidade:$(t.target).val(),token:new window.URLSearchParams(window.location.search).get("token")}).then(function(t){e.containerSubEntidade.find("option").remove(),Object.keys(t).forEach(function(e){t[e].SubEntidade.forEach(function(t){n.append($('<option value="'+t+'">'+t+"</option>"))})}),e.containerSubEntidade.append(n),e.spinner.hide()})},t}();e.ChangeEntidadeEvent=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RequestService=void 0;var o=function(){function t(t){this.url=t}return t.prototype.setUrl=function(t){return this.url=t,this},t}();e.RequestService=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChooseNewEntidadeEvent=void 0;var o=n(0),i=function(){function t(){this.chooseEntidadeBtn=$("#chooseNewEntidade"),this.httpService=new o.HttpService("AdminIfthenpayPaymentMethodSetup.php")}return t.prototype.setEvent=function(){var t=this;this.chooseEntidadeBtn.click(function(e){console.log("funciounou chooseNewEntidade"),t.dispatch(e)})},t.prototype.dispatch=function(t){this.httpService.post({ajax:1,controller:"AdminIfthenpayPaymentMethodSetup",action:"ChooseNewEntidade",paymentMethod:new window.URLSearchParams(window.location.search).get("paymentMethod"),token:new window.URLSearchParams(window.location.search).get("token")}).then(function(t){window.location.replace(t)}).fail(function(t,e,n){console.log(n)})},t}();e.ChooseNewEntidadeEvent=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClickPaymentMethodNamesEvent=void 0;var o=function(){function t(){this.content=$("#content"),this.userPaymentMethods=ifthenpayUserPaymentMethods,this.documentFragment=$(document.createDocumentFragment())}return t.prototype.removeIfthenpayOption=function(){var t=$("#payment_module_name").find('option[value="ifthenpay"]');t.length>0&&t.remove()},t.prototype.insertPaymentMethodsName=function(){var t=this;this.removeIfthenpayOption(),Object.keys(this.userPaymentMethods).forEach(function(e){t.documentFragment.append('<option value="ifthenpay">'+(t.userPaymentMethods[e].charAt(0).toUpperCase()+t.userPaymentMethods[e].slice(1))+"</option>")}),$("#payment_module_name").append(this.documentFragment)},t.prototype.setEvent=function(){var t=this;this.content.on("click","a.use_cart.btn.btn-default, #submitAddProduct",function(e){t.dispatch(e)})},t.prototype.dispatch=function(t){this.insertPaymentMethodsName()},t}();e.ClickPaymentMethodNamesEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClickResendMbwayPhoneEvent=void 0;var o=function(){function t(){this.resendPaymentBtn=$("#resendPaymentBtn"),this.ifthenpayMbwayPhoneInput=null}return t.prototype.setEvent=function(){var t=this;this.resendPaymentBtn.click(function(e){t.dispatch(e)})},t.prototype.dispatch=function(t){t.preventDefault();var e=$(t.target),n=e.attr("href"),o=new URLSearchParams(n);if(this.ifthenpayMbwayPhoneInput=$("#ifthenpayMbwayPhone"),"mbway"===o.get("paymentMethod")&&0===this.ifthenpayMbwayPhoneInput.length)e.parent().append('<div>\n                    <label>Mbway Phone Number<span style="color: red">*</span></label><br/>\n                    <input style="margin-bottom: 10px;" type="text" autocomplete="off" name="ifthenpayMbwayPhone" id="ifthenpayMbwayPhone" />\n                    <div style="color: red" id="ifthenpay_mbway_mobilephone_error"></div>\n                </div>');else if("mbway"===o.get("paymentMethod")&&this.ifthenpayMbwayPhoneInput.length>0)if(this.ifthenpayMbwayPhoneInput.val()){var i=new URL(n);i.searchParams.set("mbwayPhoneAdmin",this.ifthenpayMbwayPhoneInput.val()),window.location.href=i.href}else $("#ifthenpay_mbway_mobilephone_error").text("Mbway phone number is required");else window.location.href=n},t}();e.ClickResendMbwayPhoneEvent=o},function(t,e,n){n(9),n(22),n(27),n(29),n(31),t.exports=n(33)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(10);$(document).ready(function(){(new o.IfthenpayPaymentMethodSetupApp).start()})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IfthenpayPaymentMethodSetupApp=void 0;var o=n(11),i=n(12),r=n(13),a=function(){function t(){}return t.prototype.start=function(){(new i.ShowFormGroup).init(),(new r.PaymentMethodSetupEvents).init(),(new o.Callback).init()},t}();e.IfthenpayPaymentMethodSetupApp=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Callback=void 0;var o=function(){function t(){this.callbackUrl=$("#callbackUrl"),this.splitString="[ENTIDADE]",this.mediaQuerieDesktop="only screen and (min-width: 31.25em) and (max-width: 107.188em)"}return t.prototype.checkMediaQuerieDesktop=function(){return matchMedia(this.mediaQuerieDesktop).matches&&(this.splitString="[CHAVE_ANTI_PHISHING]"),null},t.prototype.setSplitString=function(){switch(new URLSearchParams(window.location.search).get("paymentMethod")){case"multibanco":this.splitString="[ENTIDADE]",this.checkMediaQuerieDesktop();break;case"mbway":this.splitString="[REFERENCIA]",this.checkMediaQuerieDesktop();break;case"payshop":this.splitString="[ID_CLIENTE]",this.checkMediaQuerieDesktop()}},t.prototype.init=function(){if(this.callbackUrl.length>0){this.setSplitString();var t=this.callbackUrl.html().split(this.splitString);this.callbackUrl.html(t[0]+"<br>"+this.splitString+t.slice(1).join(this.splitString)),this.callbackUrl.show()}},t}();e.Callback=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShowFormGroup=void 0;var o=function(){function t(){this.formGroup=$("div.form-group")}return t.prototype.init=function(){this.formGroup.show()},t}();e.ShowFormGroup=o},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PaymentMethodSetupEvents=void 0;var r=n(1),a=n(2),c=function(t){function e(){var e=t.call(this)||this;return e.appEvents=[a.EventsFactory.build("changeEntidade"),a.EventsFactory.build("chooseNewEntidade")],e}return i(e,t),e}(r.AppEvents);e.PaymentMethodSetupEvents=c},,,,,,,,,function(t,e){},,,,,function(t,e){},,function(t,e){},,function(t,e){},,function(t,e){}]);
